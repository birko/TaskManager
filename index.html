<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./TaskManager.js" type="text/javascript"></script>
    <title>TaskManager Site Title</title>
  </head>
    <body>
        <h1>TaskManager Example</h1>
        <h2>Current Time: <span id="time"></span></h2>
        <div id="frame">
        </div>
        <script type="text/javascript">
            const frameElement = document.getElementById("frame");
            const timeElement = document.getElementById("time");

            //Uncomment lines bellow to see tracking options
            //TaskManager.setOnTaskStart((task) => {
            //    console.log(`Starting task ${task.name}. Tasks in queue: ${TaskManager.getTaskList().length}`);
            //    console.time(task.name);
            //});
            //TaskManager.setOnTaskEnd((task) => {
            //    console.timeEnd(task.name);
            //});
            //TaskManager.setOnTaskQueued((task, index) => {
            //    console.log(`Task Enqueued: ${name} as position ${index}. Tasks in queue: ${TaskManager.getTaskList().length}`);
            //});
            //TaskManager.setOnScheduledTaskQueued((task, index) => {
            //    console.log(`Scheduled Task Enqueued: ${name} as position ${index}. Scheduled Tasks in queue: ${TaskManager.getScheduledTaskList().length}`);
            //});

            function task() {
                frameElement.innerHTML += "Task Started";
                TaskManager.invokeScheduledTask(sheduleTask, 1000, 0,"StartSheduleTask");
            }

            function secondTask() {
                frameElement.innerHTML += "<br />Task Started after 10 seconds";
            }


            function time() {
                const currentdate = new Date(); 
                const datetime = currentdate.getDate().toString().padStart(2, '0') + "."
                    + (currentdate.getMonth() +1).toString().padStart(2, '0')  + "." 
                    + currentdate.getFullYear().toString().padStart(4, '0') + " @ "  
                    + currentdate.getHours().toString().padStart(2, '0') + ":"  
                    + currentdate.getMinutes().toString().padStart(2, '0') + ":" 
                    + currentdate.getSeconds().toString().padStart(2, '0');
                    timeElement.innerHTML =  datetime;
            }

            function sheduleTask() {
                TaskManager.invokeRepeatedTask(time, 500, 0, "RepeatedTimeTask");
            }

            TaskManager.invokeTask(task, 0,"StartTask");
            TaskManager.invokeScheduledTask(secondTask, 10000, 0, "DelayedSecondTask");
        </script>
    </body>
</html>